---
- name: Configure Ansible Controller
  hosts: ansible-lab-controller
  tasks:
  - name: Ensure latest Ansible versions
    become: yes
    ansible.builtin.package:
      name: 
      - ansible
      - git
      state: latest

- name: universal host configuration
  hosts: ansible_lab_hosts
  vars:
    ansible_become: True
  roles:
  - role: ansible-hardening
    vars:
      stig_version: rhel7
      security_enable_pwquality_password_set: yes
      security_password_max_lifetime_days: 90

- name: Configure DNS Server
  hosts: ansible-lab-host1
  tasks:
  - name: Install dnsmask
    ansible.builtin.package:
    name: dnsmask
    state: latest